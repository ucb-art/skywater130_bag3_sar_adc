meas_name: 'tb_sar_slice_dynamic'
meas_class: skywater130_bag3_sar_adc.measurement.sar_slice.SarSliceDynamicMM
impl_lib: AAA_MEAS
impl_cell: SAR_SLICE_STATIC
lay_class: skywater130_bag3_sar_adc.layout.sar.SARSlice
root_dir: gen_outputs/sarslice

gen_specs_file: 'bag3_sar_vco_adc_data/specs_gen/sar_lay/specs_slice.yaml'

meas_params:
  tbm_specs:
    sim_envs:
      - tt_25
    save_outputs: ['data_out<8:0>', 'comp_p', 'comp_n', 'sig_n', 'sig_p', 'clk']
    tran_options:
      maxstep: 1.0e-12
      errpreset: conservative
    sim_params:
      num_channel: 8
      num_sample: 512
      num_sig: 7
      freq_sig: 'num_sig/(num_sample*t_per)'
      t_sim: '(num_sample+5)*t_per'
      t_rf: 20e-12
      t_early: 20e-12
      t_per: 1e-9
      t_sam: 't_per/num_channel-t_rf'
      vdm: 150e-3
      vdd: 0.85
      vopen: 0.6
      vclosed: 0.2
    pwr_domain:
      sig_p: !!python/tuple ['VSS', 'VDD']
      sig_n: !!python/tuple ['VSS', 'VDD']
    pin_values:
      clk_fast_ext: 1
      clk_sel<1:0>: 3
      fast_mode: 1
      osp: 0
      osn: 0
    sup_values:
      VDD: 0.85
      VSS: 0.0
      vcm: 0.45
      vrefp: 0.6
      vrefn: 0.3
#    load_list:
    dut_conns:
      vref<2:0>: 'vrefp,vcm,vrefn'
    stimuli_list:
      - src_type: 'vpulse'
        pin: 'clk'
        table:
          td: 't_sam'
          per: 't_per'
          pw: 't_sam'
          v1: 'v_VSS'
          v2: 'v_VDD'
          tf: 't_rf'
          tr: 't_rf'
      - src_type: 'vpulse'
        pin: 'clk_e'
        table:
          td: 't_sam'
          per: 't_per'
          pw: 't_sam-t_early'
          v1: 'v_VSS'
          v2: 'v_VDD'
          tf: 't_rf'
          tr: 't_rf'
      - src_type: 'vsin'
        pin: 'sig_p'
        table:
          vdc: 'v_vcm'
          va: 'vdm'
          freq: 'freq_sig'
          sinephase: 180
#          td: '1/(2*freq_sig)'
      - src_type: 'vsin'
        pin: 'sig_n'
        table:
          vdc: 'v_vcm'
          va: 'vdm'
          freq: 'freq_sig'

    other_list:
      - name: sw_p<7:0>
        params:
          vt1: vopen
          vt2: vclosed
          ro: 1.0e12
          rc: 10.0
        conn:
          N+: bot_p<7:0>
          N-: sig_p
          NC+: VDD
          NC-: clk
      - name: sw_n<7:0>
        params:
          vt1: vopen
          vt2: vclosed
          ro: 1.0e15
          rc: 10.0
        conn:
          N+: bot_n<7:0>
          N-: sig_n
          NC+: VDD
          NC-: clk
