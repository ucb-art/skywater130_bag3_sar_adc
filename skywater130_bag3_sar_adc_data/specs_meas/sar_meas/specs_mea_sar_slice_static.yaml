meas_name: 'tb_sar_slics_static'
meas_class: skywater130_bag3_sar_adc.measurement.sar_slice.SarSliceMM
impl_lib: AAA_MEAS
impl_cell: SAR_SLICE_STATIC
lay_class: skywater130_bag3_sar_adc.layout.sar.SARSlice
root_dir: gen_outputs/sarslice

gen_specs_file: 'bag3_sar_vco_adc_data/specs_gen/sar_lay/specs_slice.yaml'

meas_params:
  make_static_code_map: True
  swp_info:
    vdm:
      type: 'LINEAR'
      start: -0.31
      stop: 0.31
      num: 1

  tbm_specs:
    sim_envs:
      - tt_25
   # save_outputs: ['data_out<8:0>', 'comp_p', 'comp_n', 'clk', 'clk_e']
    tran_options:
      #maxstep: 1.0e-12
      errpreset: liberal
    sim_params:
      num_channel: 8
      t_sim: 't_early + t_per+t_sam'
      t_rf: 20e-12
      t_early: 50e-9
      t_per: 200e-9
      t_sam: 't_per/2-t_rf'
      vdm: 200e-3
      vdd: 1.8 #0.85
      vopen: 1.3 #0.6
      vclosed: 0.6 #0.2
    pwr_domain:
      sig_p: !!python/tuple ['VSS', 'VDD']
      sig_n: !!python/tuple ['VSS', 'VDD']
    pin_values:
      clk_fast_ext: 1
      clk_sel<1:0>: 3
      fast_mode: 1
      osp: 0
      osn: 0
    sup_values:
      VDD: 1.8 #0.85
      VSS: 0.0
      vcm: 0.95 #0.45
      vrefp: 1.1 #0.6
      vrefn: 0.8 #0.3
#    load_list:
    dut_conns:
      vref<2:0>: 'vrefp,vcm,vrefn'
      in_n: 'in_n'
      in_p: 'in_p'
    stimuli_list:
      - src_type: 'vpulse'
        pin: 'clk'
        table:
          per: 't_per'
          pw: '(t_sam-t_early)*1.2'
          #delay: '(t_sam-t_early)*1.5'
          v1: 'v_VSS'
          v2: 'v_VDD'
          tf: 't_rf'
          tr: 't_rf'
      - src_type: 'vpulse'
        pin: 'clk_e'
        table:
          per: 't_per'
          pw: 't_sam-t_early'
          v1: 'v_VSS'
          v2: 'v_VDD'
          tf: 't_rf'
          tr: 't_rf'
      - src_type: 'vdc'
        pin: 'sig_p'
        table:
          vdc: 'v_vcm+vdm/2'
      - src_type: 'vdc'
        pin: 'sig_n'
        table:
          vdc: 'v_vcm-vdm/2'
    other_list:
      - name: sw_p<7:0>
        params:
          vt1: vopen
          vt2: vclosed
          ro: 1.0e12
          rc: 50.0
        conn:
          N+: bot_p<7:0>
          N-: sig_p
          NC+: VDD
          NC-: clk
      - name: sw_n<7:0>
        params:
          vt1: vopen
          vt2: vclosed
          ro: 1.0e12
          rc: 50.0
        conn:
          N+: bot_n<7:0>
          N-: sig_n
          NC+: VDD
          NC-: clk
